{"version":3,"sources":["webpack:///src/view/mto/Ek/yarn/points/index.vue","webpack:///./src/view/mto/Ek/yarn/points/index.vue?6cc4","webpack:///./src/view/mto/Ek/yarn/points/index.vue"],"names":["points","name","components","data","nowTime","websocket","timer","bpSrcoll","tbSrcoll","tbSrcCtr","countDown","state","success","going","wait","form","warehouseSn","formOp","labelWidth","submitBtn","emptyBtn","column","label","placeholder","prop","align","readonly","span","type","format","valueFormat","width","option","page","menu","addBtn","border","height","highlightCurrentRow","watch","methods","setWebSoket","config","this","_this","onmessage","event","JSON","parse","yarnSn","setData","$tip","warning","chengzhong","actualWeight","weight","Math","random","toFixed","index","inspectionStatus","length","error","confirmStatus","push","$refs","crud","setCurrentRow","$nextTick","document","getElementsByClassName","scrollTop","check","row","over","key","submit","val","_this2","keys_default","Object","Ek","then","res","status","tbSrc","bpDom","scrollHeight","clientHeight","cellStyle","_ref","columnIndex","rowIndex","color","fontWeight","seTimer","time","vWeek","vWeek_s","date","Date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","getDay","getElementById","innerHTML","created","_this3","onkeydown","e","mounted","_this4","setInterval","beforeDestroy","clearInterval","close","destroyed","yarn_points","render","_vm","_h","$createElement","_c","_self","attrs","id","title","staticClass","ref","cell-style","on","current-row-change","slot","staticStyle","float","_v","padding","margin-left","click","model","value","callback","$$v","expression","directives","rawName","background","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.6472ecc53cd5d28ff424.js","sourcesContent":["<template>\r\n  <div id=\"points\">\r\n    <view-container title=\"纱线点数看板\">\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <div class=\"day-Order\">\r\n            <avue-crud\r\n              ref=\"crud\"\r\n              :data=\"data\"\r\n              :option=\"option\"\r\n              :cell-style=\"cellStyle\"\r\n              @current-row-change=\"check\"\r\n            >\r\n              <template slot=\"menuLeft\">\r\n                <span id=\"time\" style=\"float: left\"></span>\r\n                <!-- <span>今日订单</span> -->\r\n              </template>\r\n            </avue-crud>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row class=\"main\">\r\n        <el-col :span=\"14\">\r\n          <div class=\"formTle\">\r\n            胚布信息\r\n            <el-button\r\n              style=\"padding: 5px 10px; margin-left: 10px\"\r\n              @click=\"chengzhong\"\r\n              >模拟称重\r\n            </el-button>\r\n          </div>\r\n          <avue-form ref=\"form\" v-model=\"form\" :option=\"formOp\"> </avue-form>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <div class=\"btnList\" v-show=\"form.yarnSn\">\r\n            <el-button style=\"background: green\" @click=\"submit('通过')\"\r\n              >通过 【1】</el-button\r\n            >\r\n            <el-button style=\"background: red\" @click=\"submit('不通过')\"\r\n              >不通过 【0】</el-button\r\n            >\r\n            <el-button style=\"background: rgb(235, 181, 99)\" @click=\"over\"\r\n              >结束点数 【5】</el-button\r\n            >\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </view-container>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getyarnInfo, updataYarn } from \"@/api/mto/Ek/index.js\";\r\nimport { webSocket } from \"@/config/index.js\";\r\nexport default {\r\n  name: \"Ek\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      nowTime: \"\",\r\n      websocket: \"\",\r\n      timer: {\r\n        bpSrcoll: \"\",\r\n        tbSrcoll: \"\",\r\n        tbSrcCtr: 1,\r\n      },\r\n      countDown: \"\",\r\n      state: {\r\n        success: [],\r\n        going: [],\r\n        wait: [],\r\n      },\r\n      form: {\r\n        warehouseSn: \"\",\r\n      },\r\n      formOp: {\r\n        labelWidth: 110,\r\n        submitBtn: false,\r\n        emptyBtn: false,\r\n        column: [\r\n          {\r\n            label: \"纱线编号\",\r\n            placeholder: \" \",\r\n            prop: \"yarnSn\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"纱线名称\",\r\n            placeholder: \" \",\r\n            prop: \"yarnName\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"入库日期\",\r\n            placeholder: \" \",\r\n            prop: \"yarnDate\",\r\n            type: \"date\",\r\n            format: \"yyyy-MM-dd HH:mm:ss\",\r\n            valueFormat: \"yyyy-MM-dd HH:mm:ss\",\r\n            align: \"center\",\r\n            width: 200,\r\n            readonly: true,\r\n            span: 16,\r\n          },\r\n          {\r\n            label: \"纱批\",\r\n            placeholder: \" \",\r\n            prop: \"batchNo\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"纱牌\",\r\n            placeholder: \" \",\r\n            prop: \"yarnSign\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n\r\n          {\r\n            label: \"箱数\",\r\n            placeholder: \" \",\r\n            prop: \"sum\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"锭数\",\r\n            placeholder: \" \",\r\n            prop: \"ingotSum\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"重量\",\r\n            placeholder: \" \",\r\n            prop: \"weight\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"实际重量\",\r\n            prop: \"actualWeight\",\r\n            placeholder: \" \",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"重量单位\",\r\n            prop: \"unit\",\r\n            placeholder: \" \",\r\n            readonly: true,\r\n            align: \"left\",\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"检验状态\",\r\n            prop: \"inspectionStatus\",\r\n            placeholder: \" \",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"确认状态\",\r\n            placeholder: \" \",\r\n            prop: \"confirmStatus\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n        ],\r\n      },\r\n      data: [],\r\n      option: {\r\n        page: false,\r\n        menu: false,\r\n        addBtn: false,\r\n        border: true,\r\n        height: 400,\r\n        highlightCurrentRow: true,\r\n        column: [\r\n          {\r\n            label: \"序号\",\r\n            prop: \"index\",\r\n            width: 60,\r\n            align: \"left\",\r\n          },\r\n          {\r\n            label: \"纱线编号\",\r\n            placeholder: \" \",\r\n            prop: \"yarnSn\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"纱线名称\",\r\n            placeholder: \" \",\r\n            prop: \"yarnName\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"入库日期\",\r\n            placeholder: \" \",\r\n            prop: \"yarnDate\",\r\n            type: \"date\",\r\n            format: \"yyyy-MM-dd HH:mm:ss\",\r\n            valueFormat: \"yyyy-MM-dd HH:mm:ss\",\r\n            align: \"center\",\r\n            width: 200,\r\n            readonly: true,\r\n            span: 16,\r\n          },\r\n          {\r\n            label: \"纱批\",\r\n            placeholder: \" \",\r\n            prop: \"batchNo\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"纱牌\",\r\n            placeholder: \" \",\r\n            prop: \"yarnSign\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n\r\n          {\r\n            label: \"箱数\",\r\n            placeholder: \" \",\r\n            prop: \"sum\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"锭数\",\r\n            placeholder: \" \",\r\n            prop: \"ingotSum\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"重量\",\r\n            placeholder: \" \",\r\n            prop: \"weight\",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"实际重量\",\r\n            prop: \"actualWeight\",\r\n            placeholder: \" \",\r\n            align: \"right\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"重量单位\",\r\n            prop: \"unit\",\r\n            placeholder: \" \",\r\n            readonly: true,\r\n            align: \"left\",\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"检验状态\",\r\n            prop: \"inspectionStatus\",\r\n            placeholder: \" \",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n          {\r\n            label: \"确认状态\",\r\n            placeholder: \" \",\r\n            prop: \"confirmStatus\",\r\n            align: \"left\",\r\n            readonly: true,\r\n            span: 8,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    setWebSoket() {\r\n      webSocket.setWebSoket(this);\r\n      let _this = this;\r\n      //接收到消息的回调方法\r\n      _this.websocket.onmessage = function (event) {\r\n        let data = JSON.parse(event.data);\r\n        if (event.data === \"null\") {\r\n          _this.$tip.warning(\"暂无该订单信息!\");\r\n          return;\r\n        }\r\n        if (data.yarnSn) {\r\n          _this.setData(data);\r\n        }\r\n      };\r\n    },\r\n    //称重\r\n    chengzhong() {\r\n      if (this.form.yarnSn != \"\") {\r\n        this.form.actualWeight = (\r\n          this.form.weight +\r\n          Math.random() * (0.5 + 0.5) -\r\n          0.5\r\n        ).toFixed(2);\r\n        this.data[this.form.index - 1].actualWeight = this.form.actualWeight;\r\n        if (this.form.actualWeight > this.form.weight) {\r\n          this.data[this.form.index - 1].inspectionStatus = \"通过\";\r\n          this.form.inspectionStatus = \"通过\";\r\n        } else {\r\n          this.data[this.form.index - 1].inspectionStatus = \"不通过\";\r\n          this.form.inspectionStatus = \"不通过\";\r\n        }\r\n      }\r\n    },\r\n    setData(data) {\r\n      for (let index = 0; index < this.data.length; index++) {\r\n        if (\r\n          data.yarnSn === this.data[index].yarnSn &&\r\n          data.type === \"getYarn\"\r\n        ) {\r\n          this.$tip.error(\"单号重复!\");\r\n          return;\r\n        }\r\n        if (\r\n          data.yarnSn === this.data[index].yarnSn &&\r\n          data.type === \"yarnConfirm\"\r\n        ) {\r\n          this.data[index].confirmStatus = data.confirmStatus;\r\n          this.$tip.success(\"操作成功!\");\r\n          return;\r\n        }\r\n      }\r\n      data.index = this.data.length + 1;\r\n      // data.weightUnit = 'kg'\r\n      this.data.push(data);\r\n      this.$refs.crud.setCurrentRow(data);\r\n      this.$nextTick(() => {\r\n        document.getElementsByClassName(\r\n          \"el-table__body-wrapper\"\r\n        )[0].scrollTop += 100;\r\n      });\r\n    },\r\n    check(row) {\r\n      this.form = this.data[row.index - 1];\r\n    },\r\n    over() {\r\n      for (let key in this.form) {\r\n        this.form[key] = \"\";\r\n      }\r\n      this.data = [];\r\n    },\r\n    submit(val) {\r\n      if (Object.keys(this.form).length > 0) {\r\n        this.form.confirmStatus = val;\r\n        this.data[this.form.index - 1].confirmStatus = val;\r\n        updataYarn(this.form).then((res) => {\r\n          if (res.status === 200) {\r\n            this.$tip.success(\"操作成功!\");\r\n          }\r\n        });\r\n      } else {\r\n        this.$tip.error(\"请选择操作的数据!\");\r\n      }\r\n    },\r\n    tbSrc() {\r\n      let bpDom = document.getElementsByClassName(\"el-table__body-wrapper\")[0];\r\n      if (this.timer.tbSrcCtr > 0) {\r\n        bpDom.scrollTop += 20;\r\n      } else {\r\n        bpDom.scrollTop -= 20;\r\n      }\r\n      if (bpDom.scrollTop >= bpDom.scrollHeight - bpDom.clientHeight) {\r\n        this.timer.tbSrcCtr = 0;\r\n      }\r\n      if (bpDom.scrollTop <= 0) {\r\n        this.timer.tbSrcCtr = 1;\r\n      }\r\n    },\r\n    cellStyle({ row, column, rowIndex, columnIndex }) {\r\n      if (columnIndex == 11) {\r\n        if (row.inspectionStatus === \"通过\") {\r\n          return {\r\n            color: \"green\",\r\n            fontWeight: \"bold\",\r\n          };\r\n        } else {\r\n          return {\r\n            color: \"red\",\r\n            fontWeight: \"bold\",\r\n          };\r\n        }\r\n      }\r\n      if (columnIndex == 12) {\r\n        if (row.confirmStatus === \"通过\") {\r\n          return {\r\n            color: \"green\",\r\n            fontWeight: \"bold\",\r\n          };\r\n        } else {\r\n          return {\r\n            color: \"red\",\r\n            fontWeight: \"bold\",\r\n          };\r\n        }\r\n      }\r\n    },\r\n    seTimer() {\r\n      // this.timer.tbSrcoll = setInterval(this.tbSrc, 1500);\r\n    },\r\n    time() {\r\n      var vWeek, vWeek_s, vDay;\r\n      vWeek = [\r\n        \"星期天\",\r\n        \"星期一\",\r\n        \"星期二\",\r\n        \"星期三\",\r\n        \"星期四\",\r\n        \"星期五\",\r\n        \"星期六\",\r\n      ];\r\n      var date = new Date();\r\n      let year = date.getFullYear();\r\n      let month = date.getMonth() + 1;\r\n      let day = date.getDate();\r\n      let hours = date.getHours();\r\n      let minutes = date.getMinutes();\r\n      let seconds = date.getSeconds();\r\n      vWeek_s = date.getDay();\r\n      document.getElementById(\"time\").innerHTML =\r\n        year +\r\n        \"年\" +\r\n        month +\r\n        \"月\" +\r\n        day +\r\n        \"日\" +\r\n        \"\\t\" +\r\n        hours +\r\n        \":\" +\r\n        minutes +\r\n        \":\" +\r\n        seconds +\r\n        \"\\t\" +\r\n        vWeek[vWeek_s];\r\n    },\r\n  },\r\n  created() {\r\n    document.onkeydown = (e) => {\r\n      if (e.key === \"1\") {\r\n        this.submit(\"通过\");\r\n      } else if (e.key === \"0\") {\r\n        this.submit(\"不通过\");\r\n      } else if (e.key === \"5\") {\r\n        this.over();\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.setWebSoket();\r\n    // this.setData();\r\n    this.$nextTick(() => {\r\n      this.seTimer();\r\n    });\r\n\r\n    // this.state.in.date = 60 * 60; //一个小时，按秒计算，自己调整!\r\n    // this.timer = setInterval(this.CountDown, 1000);\r\n    this.nowTime = setInterval(this.time, 1000);\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.nowTime);\r\n    clearInterval(this.timer);\r\n    clearInterval(this.timer.tbSrcoll);\r\n    this.websocket.close();\r\n  },\r\n  destroyed() {\r\n    this.websocket.close();\r\n  },\r\n};\r\n</script>\r\n<style lang='stylus'>\r\n#points {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 2px solid #fff;\r\n  color: #fff;\r\n  background-color: rgb(2, 26, 60);\r\n\r\n  .formTle {\r\n    width: 100%;\r\n    height: 35px;\r\n    line-height: 35px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    color: #fff;\r\n    margin-bottom: 10px;\r\n    text-align: left;\r\n    text-indent: 0.5em;\r\n  }\r\n\r\n  .main {\r\n    border: 1px solid #DCDFE6;\r\n    border-top: none;\r\n    width: 99%;\r\n    margin: 0 auto;\r\n    padding: 10px 0;\r\n  }\r\n\r\n  .btnList {\r\n    display: flex;\r\n    flex-direction: row;\r\n    text-align: center;\r\n    align-items: center;\r\n    height: 250px;\r\n    justify-content: space-around;\r\n\r\n    .el-button {\r\n      font-size: 18px;\r\n      font-weight: bold;\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  .el-input__prefix {\r\n    display: none;\r\n  }\r\n\r\n  .avue-empty__desc {\r\n    color: #fff;\r\n  }\r\n\r\n  .el-input--prefix .el-input__inner {\r\n    padding-left: 17px;\r\n  }\r\n\r\n  .el-input__inner {\r\n    border: none;\r\n    border-bottom: 1px solid #fff;\r\n    border-radius: 0;\r\n    font-size: 18px;\r\n    color: #fff;\r\n    cursor: auto;\r\n    background-color: rgb(2, 26, 60);\r\n  }\r\n\r\n  .avue-group .el-collapse, .avue-group .el-collapse-item__wrap {\r\n    background-color: rgb(2, 26, 60);\r\n  }\r\n\r\n  .el-collapse-item__wrap, .el-collapse {\r\n    border: none;\r\n  }\r\n\r\n  .el-form-item__label {\r\n    color: #fff;\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .el-card.is-always-shadow, .el-tabs--border-card {\r\n    border: none;\r\n  }\r\n\r\n  .el-tabs--border-card, .el-tabs--border-card>.el-tabs__header, .el-tabs--border-card>.el-tabs__header .el-tabs__item.is-active, .el-table, .el-table th, .el-table tr {\r\n    background-color: rgb(2, 26, 60) !important;\r\n  }\r\n\r\n  .avue-crud .el-table th, .avue-crud .el-table tr, .el-tabs--border-card>.el-tabs__header .el-tabs__item:not(.is-disabled):hover, .el-tabs--border-card>.el-tabs__header .el-tabs__item.is-active {\r\n    color: #fff;\r\n  }\r\n\r\n  .el-button--medium.is-circle {\r\n    padding: 5px;\r\n  }\r\n\r\n  .el-tabs__item {\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .el-table__body tr.current-row>td, .el-table__body tr:hover>td {\r\n    background-color: rgb(245, 108, 108) !important;\r\n  }\r\n\r\n  .icon {\r\n    width: 58px;\r\n    height: 58px;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    fill: #fff;\r\n    overflow: hidden;\r\n  }\r\n\r\n  p {\r\n    margin-block-start: 0.8em;\r\n    margin-block-end: 0.8em;\r\n  }\r\n\r\n  .el-table__body-wrapper::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n  .avue-crud__left {\r\n    width: 80%;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    color: #fff;\r\n  }\r\n\r\n  .el-steps--simple {\r\n    padding: 10px 5px !important;\r\n  }\r\n\r\n  .el-step.is-simple:not(:last-of-type) .el-step__title {\r\n    width: 60% !important;\r\n  }\r\n\r\n  .el-step.is-simple .el-step__arrow {\r\n    flex-grow: 0.5 !important;\r\n  }\r\n\r\n  .el-step.is-simple .el-step__title {\r\n    font-size: 18px !important;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .el-step__title.is-wait, .el-step__head.is-wait {\r\n    color: #000 !important;\r\n    border-color: #000 !important;\r\n  }\r\n\r\n  .el-step__title.is-process, .el-step__head.is-process {\r\n    color: red !important;\r\n    border-color: red !important;\r\n  }\r\n\r\n  .avue-crud .el-table--medium td {\r\n    padding: 7px 0 !important;\r\n  }\r\n\r\n  .el-table {\r\n    font-size: 18px !important;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/mto/Ek/yarn/points/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"points\"}},[_c('view-container',{attrs:{\"title\":\"纱线点数看板\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"day-Order\"},[_c('avue-crud',{ref:\"crud\",attrs:{\"data\":_vm.data,\"option\":_vm.option,\"cell-style\":_vm.cellStyle},on:{\"current-row-change\":_vm.check}},[_c('template',{slot:\"menuLeft\"},[_c('span',{staticStyle:{\"float\":\"left\"},attrs:{\"id\":\"time\"}})])],2)],1)])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"main\"},[_c('el-col',{attrs:{\"span\":14}},[_c('div',{staticClass:\"formTle\"},[_vm._v(\"\\n          胚布信息\\n          \"),_c('el-button',{staticStyle:{\"padding\":\"5px 10px\",\"margin-left\":\"10px\"},on:{\"click\":_vm.chengzhong}},[_vm._v(\"模拟称重\\n          \")])],1),_vm._v(\" \"),_c('avue-form',{ref:\"form\",attrs:{\"option\":_vm.formOp},model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form.yarnSn),expression:\"form.yarnSn\"}],staticClass:\"btnList\"},[_c('el-button',{staticStyle:{\"background\":\"green\"},on:{\"click\":function($event){return _vm.submit('通过')}}},[_vm._v(\"通过 【1】\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"background\":\"red\"},on:{\"click\":function($event){return _vm.submit('不通过')}}},[_vm._v(\"不通过 【0】\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"background\":\"rgb(235, 181, 99)\"},on:{\"click\":_vm.over}},[_vm._v(\"结束点数 【5】\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fefedb3a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/mto/Ek/yarn/points/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fefedb3a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fefedb3a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/mto/Ek/yarn/points/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}