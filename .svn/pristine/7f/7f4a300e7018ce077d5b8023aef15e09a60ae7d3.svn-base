webpackJsonp([5],{"+PBG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lHA8"),n=a.n(i),o=a("RRpD"),s={name:"",props:{checkData:Array,leftWidth:String},components:{},data:function(){return{dialogVisible:!1,loading:!1,loadingDlg:!1,existData:[],dlgTle:"",controll:{border:!1,full:!1},crudData:[],crudOp:{menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,showSummary:!0,sumColumnList:[{label:"共",name:"weight",type:"sum"}],column:[{label:"批号",prop:"batchNo"},{label:"疋号",prop:"countingNo",align:"right"},{label:"车笼id",prop:"boxCarId",hide:!0},{label:"重量",prop:"weight",align:"right"},{label:"单位",prop:"weightUnit"}]},area:{x:50,y:5,list:[]},data:[]}},watch:{},methods:{getData:function(){var t=this;this.loading=!0,Object(o.c)().then(function(e){e.data.forEach(function(e,a){e.isExtreme?(t.area.x=e.maxX,t.area.y=e.maxY):t.area.list.push(e)})}),Object(o.b)().then(function(e){void 0!=t.checkData&&e.data.forEach(function(t,e){}),t.data=t.arrGroup(e.data).sort(function(t,e){return t.axisY-e.axisY}),t.data.forEach(function(t){t.list.sort(function(t,e){return t.axisX===e.axisX?t.axisZ-e.axisZ:t.axisX-e.axisX})})}),void 0!=this.checkData?setTimeout(function(){t.$nextTick(function(){var e=[];t.checkData.forEach(function(t,a){e.push(t.boxCarId)}),(e=new n.a(e)).forEach(function(e){e.split("-")[0];for(var a=e.split("-")[1],i=0;i<t.data[a-1].list.length;i++)e===t.data[a-1].list[i].boxCarId&&(t.data[a-1].list[i].check=!0,t.existData.push(t.data[a-1].list[i].check))})}),t.loading=!1},1500):setTimeout(function(){t.loading=!1},500)},getDetail:function(t){var e=this;t.exist&&(this.loadingDlg=!0,Object(o.a)({boxId:t.boxId}).then(function(t){e.crudData=t.data,e.loadingDlg=!1}))},domSet:function(){document.getElementsByClassName("content")[0].addEventListener("scroll",this.isScroll,!0)},isScroll:function(){var t=document.getElementsByClassName("content")[0],e=document.getElementsByClassName("xBox")[0],a=document.getElementsByClassName("yBox")[0];e.scrollLeft=t.scrollLeft,a.scrollTop=t.scrollTop},arrGroup:function(t){for(var e={},a=[],i=0;i<t.length;i++){var n=t[i];if(e[n.axisY])for(var o=0;o<a.length;o++){var s=a[o];if(s.axisY==n.axisY){s.list.push(n);break}}else a.push({axisY:n.axisY,list:[n]}),e[n.axisY]=n}return a}},created:function(){},mounted:function(){this.getData(),this.domSet()},beforeDestroy:function(){}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"drap",rawName:"v-drap",value:{x:"content",y:"content"},expression:"{ x: 'content', y: 'content' }"}],attrs:{id:"iqGq"}},[a("div",{staticClass:"navigation"},[a("div",{staticClass:"one"},[t._v("一层")]),t._v(" "),a("div",{staticClass:"two"},[t._v("二层")]),t._v(" "),a("div",{staticClass:"controll"},[a("span",[t._v("坐标轴：")]),t._v(" "),a("el-tooltip",{attrs:{content:"坐标轴: "+t.controll.border,placement:"top"}},[a("el-switch",{model:{value:t.controll.border,callback:function(e){t.$set(t.controll,"border",e)},expression:"controll.border"}})],1)],1)]),t._v(" "),a("div",{staticClass:"content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box",style:{width:70*t.area.x+30+"px",height:70*t.area.y+30+"px"}},[t._l(t.data,function(e){return a("div",{key:e.axisY,staticClass:"wareHouse"},t._l(e.list,function(e,i){return a("div",{key:i,staticClass:"cabinet",class:{cabinet_check:e.highLight},style:{marginLeft:(e.axisX>1?70*(e.axisX-1)+10:10)+"px",marginTop:(e.axisZ>1?10:35)+"px",backgroundColor:"1"===e.state?e.check?"red":e.axisZ>1?"#409EFF":"#67C23A":"2"===e.state?"#ccc":"",display:"1"===e.state||"2"===e.state?"":"none",color:"#fff"}},[e.exist?a("el-popover",{attrs:{placement:"top-start",title:t.dlgTle,width:"600",trigger:"click"}},[a("avue-crud",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDlg,expression:"loadingDlg"}],attrs:{data:t.crudData,option:t.crudOp}}),t._v(" "),a("div",{attrs:{slot:"reference"},on:{click:function(a){return t.getDetail(e)}},slot:"reference"},[t._v("\n              "+t._s(e.exist?"✔":"")+"\n            ")])],1):t._e()],1)}),0)}),t._v(" "),a("div",{staticClass:"area"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.controll.border,expression:"controll.border"}],staticClass:"xBox",style:{width:t.leftWidth}},[a("div",{staticClass:"xShaft",style:{width:70*t.area.x+55+"px"}},t._l(t.area.x,function(e,i){return a("div",{key:i},[t._v("\n              "+t._s(e)+"\n            ")])}),0)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.controll.border,expression:"controll.border"}],staticClass:"yBox"},[a("div",{staticClass:"yShaft",style:{height:70*t.area.y+60+"px"}},t._l(t.area.y,function(e,i){return a("div",{key:i},[t._v("\n              "+t._s(e)+"\n            ")])}),0)]),t._v(" "),t._l(t.area.list,function(e){return a("div",{key:e.name,staticClass:"partition",style:{width:70*(e.endX-e.startX+1)+"px",height:70*(e.endY-e.startY+1)+"px",lineHeight:e.endY-e.startY+1==1?"50px":70*(e.endY-e.startY+1)+"px",top:e.startY>1?70*(e.startY-1)+16+"px":"16px",left:e.startX>1?70*(e.startX-1)+15+"px":"15px",backgroundColor:e.check?"red":""}},[a("div",{style:{minWidth:e.areaName.length>3?"75px":""}},[t._v("\n            "+t._s(e.areaName)+"\n          ")])])})],2)],2)]),t._v(" "),a("el-dialog",{attrs:{title:t.dlgTle,visible:t.dialogVisible,width:"60%","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"formBox",staticStyle:{"margin-top":"10px"}},[a("avue-crud",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDlg,expression:"loadingDlg"}],attrs:{data:t.crudData,option:t.crudOp}})],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(s,r,!1,function(t){a("tuuX")},null,null);e.default=l.exports},BDhv:function(t,e,a){var i=a("kM2E");i(i.P+i.R,"Set",{toJSON:a("m9gC")("Set")})},ioQ5:function(t,e,a){a("HpRW")("Set")},lHA8:function(t,e,a){t.exports={default:a("pPW7"),__esModule:!0}},oNmr:function(t,e,a){a("9Bbf")("Set")},pPW7:function(t,e,a){a("M6a0"),a("zQR9"),a("+tPU"),a("ttyz"),a("BDhv"),a("oNmr"),a("ioQ5"),t.exports=a("FeBl").Set},ttyz:function(t,e,a){"use strict";var i=a("9C8M"),n=a("LIJb");t.exports=a("qo66")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(n(this,"Set"),t=0===t?0:t,t)}},i)},tuuX:function(t,e){}});
//# sourceMappingURL=5.d22c6e6684f4079f2f8e.js.map