webpackJsonp([38],{"0iik":function(t,e){},"2Kro":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("fZjL"),o=a.n(n),s=a("woOf"),i=a.n(s),l=a("9Z/t"),c={name:"system",components:{},data:function(){return{loading:!1,page:{pageSize:10,total:0,currentPage:1},chooseData:{},oldData:{},changeList:[],form:{},formOp:{submitBtn:!1,emptyBtn:!1,column:[{label:"系统名称",prop:"systemName",tip:"系统名称",span:6},{label:"系统编号",prop:"systemCode",tip:"系统编号",span:6},{label:"联系人",prop:"contacts",tip:"联系人",span:6},{label:"开发公司",prop:"developCompany",tip:"开发公司",span:6}]},data:[{systemName:"视频监控系统",systemCode:1,token:"MTYwMjEyMjk3Mw==",supportCompany:"company1",contacts:"欧先生",linkWay:"132222222",developCompany:"test1",mqName:"test1",mqCode:"test1",index:1},{systemName:"考勤系统",systemCode:2,token:"MTYwMjEyMjk3Mw==",supportCompany:"company2",contacts:"欧先生",linkWay:"132222222",developCompany:"test2",mqName:"test2",mqCode:"test2",index:2},{systemName:"门禁系统",systemCode:3,token:"MTYwMjEyMjk3Mw==",supportCompany:"company3",contacts:"欧先生",linkWay:"132222222",developCompany:"test3",mqName:"test3",mqCode:"test3",index:3},{systemName:"染缸中控系统",systemCode:4,token:"MTYwMjEyMjk3Mw==",supportCompany:"company4",contacts:"欧先生",linkWay:"132222222",developCompany:"test4",mqName:"test4",mqCode:"test4",index:4},{systemName:"自动注料系统",systemCode:5,token:"MTYwMjEyMjk3Mw==",supportCompany:"company5",contacts:"欧先生",linkWay:"132222222",developCompany:"test5",mqName:"test5",mqCode:"test5",index:5},{systemName:"仓管系统",systemCode:6,token:"MTYwMjEyMjk3Mw==",supportCompany:"company6",contacts:"欧先生",linkWay:"132222222",developCompany:"test6",mqName:"test6",mqCode:"test6",index:6},{systemName:"物流系统",systemCode:7,token:"MTYwMjEyMjk3Mw==",supportCompany:"company7",contacts:"欧先生",linkWay:"132222222",developCompany:"test7",mqName:"test7",mqCode:"test7",index:7},{systemName:"自动打包系统",systemCode:8,token:"MTYwMjEyMjk3Mw==",supportCompany:"company8",contacts:"欧先生",linkWay:"132222222",developCompany:"test8",mqName:"test8",mqCode:"test8",index:8}],crudOp:{menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,height:"calc(100vh - 180px)",column:[{label:"序号",prop:"index",tip:"序号",width:60},{label:"系统ID",prop:"iotId",tip:"系统名称",display:!0,hide:!0},{label:"系统名称",prop:"systemName",tip:"系统名称",cell:!0},{label:"系统编号",prop:"systemCode",tip:"系统编号",cell:!0},{label:"通行令牌",prop:"token",tip:"通行令牌"},{label:"技术支持公司",prop:"supportCompany",tip:"技术支持公司",cell:!0},{label:"联系人",prop:"contact",tip:"联系人",cell:!0},{label:"联系方式",prop:"linkWay",tip:"联系方式",cell:!0},{label:"开发公司",prop:"developCompany",tip:"开发公司",cell:!0},{label:"消息队列名称",prop:"mqName",tip:"消息队列名称",cell:!0},{label:"消息队列关键词",prop:"mqCode",tip:"消息队列关键词",cell:!0}]}}},watch:{},methods:{getData:function(){var t=this;for(var e in this.data=[],this.oldData=[],this.chooseData={},this.changeList=[],this.loading=!0,this.form)""===this.form[e]&&delete this.form[e];Object(l.r)(i()(this.form,{page:this.page.currentPage,rows:this.page.pageSize,start:(this.page.currentPage-1)*this.page.pageSize+1})).then(function(e){t.data=e.data.records,t.page.total=e.data.total,t.data.forEach(function(e,a){e.index=a+1;var n=t;n.$nextTick(function(){document.getElementsByClassName("el-table__row")[a].addEventListener("input",function(){n.iptChange(e)},!1)})}),t.loading=!1})},add:function(){var t=this;o()(this.oldData).length>0&&(this.oldData.$cellEdit=!1),this.data.push({index:this.data.length+1,$cellEdit:!0}),this.$refs.crud.setCurrentRow(this.data[this.data.length-1]),this.iptChange(this.data[this.data.length-1]),this.oldData=this.data[this.data.length-1],this.$nextTick(function(){var e=t;document.getElementsByClassName("el-table__row")[e.data.length-1].addEventListener("input",function(){e.iptChange(e.oldData)},!1)})},iptChange:function(t){if(0===this.changeList.length)this.changeList.push(t);else for(var e=0;e<this.changeList.length;e++){if(t.index===this.changeList[e].index)return void(this.changeList[e]=t);this.changeList.length-1===e&&this.changeList[e].index!=t.index&&this.changeList.push(t)}},del:function(){var t=this;0!==o()(this.chooseData).length?this.$tip.cofirm("是否确定删除",this,{}).then(function(){Object(l.l)(t.chooseData.iotId).then(function(e){200===e.data.code?(t.$tip.success("删除成功"),t.data.splice(t.chooseData.index-1,1)):t.$tip.warning("删除失败")}).catch(function(e){t.$tip.error("删除失败!")})}):this.$tip.error("请选择要删除的数据!")},sava:function(){for(var t=0;t<this.changeList.length;t++)if(!this.changeList[t].systemName||!this.changeList[t].systemCode)return void this.$tip.error("设备/报警时间不能为空!");this.changeList.forEach(function(t,e){t.iotId?Object(l.x)(t).then(function(t){}):Object(l.f)(t).then(function(t){})}),this.getData(),this.$tip.success("保存成功!")},cancel:function(){this.getData()},query:function(){},close:function(){document.getElementsByClassName("el-dialog__headerbtn")[0].click()},cellClick:function(t){this.oldData.$cellEdit=!1,this.$set(t,"$cellEdit",!0),this.oldData=t,this.chooseData=t}},created:function(){},mounted:function(){},beforeDestroy:function(){}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"system"}},[a("view-container",{attrs:{title:"系统注册信息"}},[a("div",{staticClass:"btnList"},[a("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.add}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"success",disabled:t.loading},on:{click:t.sava}},[t._v("保存")]),a("el-button",{attrs:{type:"danger",disabled:t.loading},on:{click:t.del}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"info",disabled:t.loading},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.query}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"danger",disabled:t.loading},on:{click:t.close}},[t._v("关闭")])],1),t._v(" "),a("div",{staticClass:"formBox"},[a("avue-form",{ref:"form",attrs:{option:t.formOp},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1),t._v(" "),a("div",{staticClass:"crudBox"},[a("avue-crud",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"crud",attrs:{data:t.data,option:t.crudOp,page:t.page},on:{"current-row-change":t.cellClick,"on-load":t.getData,"update:page":function(e){t.page=e}}})],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(c,p,!1,function(t){a("0iik")},null,null);e.default=d.exports}});
//# sourceMappingURL=38.90df295e752d8475f532.js.map