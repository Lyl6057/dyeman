{"version":3,"sources":["webpack:///src/view/pro/info/system/index.vue","webpack:///./src/view/pro/info/system/index.vue?36db","webpack:///./src/view/pro/info/system/index.vue"],"names":["system","name","components","data","loading","page","pageSize","total","currentPage","chooseData","oldData","changeList","form","formOp","submitBtn","emptyBtn","column","label","prop","tip","span","systemName","systemCode","token","supportCompany","contacts","linkWay","developCompany","mqName","mqCode","index","crudOp","menu","addBtn","border","highlightCurrentRow","height","width","display","hide","cell","watch","methods","getData","_this2","this","key","Object","info","assign_default","rows","start","then","res","records","forEach","item","_this","$nextTick","document","getElementsByClassName","addEventListener","iptChange","add","_this3","keys_default","length","$cellEdit","push","$refs","crud","setCurrentRow","val","i","del","_this4","$tip","cofirm","iotId","code","success","splice","warning","catch","err","error","sava","cancel","query","close","click","cellClick","$set","created","mounted","beforeDestroy","info_system","render","_vm","_h","$createElement","_c","_self","attrs","id","title","staticClass","type","disabled","on","_v","ref","option","model","value","callback","$$v","expression","directives","rawName","current-row-change","on-load","update:page","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/38.90df295e752d8475f532.js","sourcesContent":["<template>\r\n  <div id=\"system\">\r\n    <view-container title=\"系统注册信息\">\r\n      <div class=\"btnList\">\r\n        <el-button type=\"primary\" @click=\"add\" :disabled=\"loading\"\r\n          >新增</el-button\r\n        >\r\n        <el-button type=\"success\" @click=\"sava\" :disabled=\"loading\"\r\n          >保存</el-button\r\n        ><el-button type=\"danger\" @click=\"del\" :disabled=\"loading\"\r\n          >删除</el-button\r\n        >\r\n        <el-button type=\"info\" @click=\"cancel\" :disabled=\"loading\"\r\n          >取消</el-button\r\n        >\r\n        <el-button type=\"primary\" @click=\"query\" :disabled=\"loading\"\r\n          >查询</el-button\r\n        >\r\n        <el-button type=\"danger\" @click=\"close\" :disabled=\"loading\"\r\n          >关闭</el-button\r\n        >\r\n      </div>\r\n      <div class=\"formBox\">\r\n        <avue-form ref=\"form\" v-model=\"form\" :option=\"formOp\"> </avue-form>\r\n      </div>\r\n      <div class=\"crudBox\">\r\n        <avue-crud\r\n          v-loading=\"loading\"\r\n          ref=\"crud\"\r\n          :data=\"data\"\r\n          :option=\"crudOp\"\r\n          @current-row-change=\"cellClick\"\r\n          @on-load=\"getData\"\r\n          :page.sync=\"page\"\r\n        ></avue-crud>\r\n      </div>\r\n    </view-container>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  getSystem,\r\n  updataSystem,\r\n  addSystem,\r\n  delSystem,\r\n} from \"@/api/pro/info/index\";\r\nexport default {\r\n  name: \"system\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      page: {\r\n        pageSize: 10,\r\n        total: 0,\r\n        currentPage: 1,\r\n      },\r\n      chooseData: {},\r\n      oldData: {}, // 记录上一次点击编辑\r\n      changeList: [], // 记录修改的对象\r\n      form: {},\r\n      formOp: {\r\n        submitBtn: false,\r\n        emptyBtn: false,\r\n        column: [\r\n          {\r\n            label: \"系统名称\",\r\n            prop: \"systemName\",\r\n            tip: \"系统名称\",\r\n            span: 6,\r\n          },\r\n          {\r\n            label: \"系统编号\",\r\n            prop: \"systemCode\",\r\n            tip: \"系统编号\",\r\n            span: 6,\r\n          },\r\n          {\r\n            label: \"联系人\",\r\n            prop: \"contacts\",\r\n            tip: \"联系人\",\r\n            span: 6,\r\n          },\r\n          {\r\n            label: \"开发公司\",\r\n            prop: \"developCompany\",\r\n            tip: \"开发公司\",\r\n            span: 6,\r\n          },\r\n        ],\r\n      },\r\n      data: [\r\n        {\r\n          systemName: \"视频监控系统\",\r\n          systemCode: 1,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company1\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test1\",\r\n          mqName: \"test1\",\r\n          mqCode: \"test1\",\r\n          index: 1,\r\n        },\r\n        {\r\n          systemName: \"考勤系统\",\r\n          systemCode: 2,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company2\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test2\",\r\n          mqName: \"test2\",\r\n          mqCode: \"test2\",\r\n          index: 2,\r\n        },\r\n        {\r\n          systemName: \"门禁系统\",\r\n          systemCode: 3,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company3\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test3\",\r\n          mqName: \"test3\",\r\n          mqCode: \"test3\",\r\n          index: 3,\r\n        },\r\n        {\r\n          systemName: \"染缸中控系统\",\r\n          systemCode: 4,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company4\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test4\",\r\n          mqName: \"test4\",\r\n          mqCode: \"test4\",\r\n          index: 4,\r\n        },\r\n        {\r\n          systemName: \"自动注料系统\",\r\n          systemCode: 5,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company5\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test5\",\r\n          mqName: \"test5\",\r\n          mqCode: \"test5\",\r\n          index: 5,\r\n        },\r\n        {\r\n          systemName: \"仓管系统\",\r\n          systemCode: 6,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company6\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test6\",\r\n          mqName: \"test6\",\r\n          mqCode: \"test6\",\r\n          index: 6,\r\n        },\r\n        {\r\n          systemName: \"物流系统\",\r\n          systemCode: 7,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company7\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test7\",\r\n          mqName: \"test7\",\r\n          mqCode: \"test7\",\r\n          index: 7,\r\n        },\r\n        {\r\n          systemName: \"自动打包系统\",\r\n          systemCode: 8,\r\n          token: \"MTYwMjEyMjk3Mw==\",\r\n          supportCompany: \"company8\",\r\n          contacts: \"欧先生\",\r\n          linkWay: \"132222222\",\r\n          developCompany: \"test8\",\r\n          mqName: \"test8\",\r\n          mqCode: \"test8\",\r\n          index: 8,\r\n        },\r\n      ],\r\n      crudOp: {\r\n        menu: false,\r\n        addBtn: false,\r\n        border: true,\r\n        highlightCurrentRow: true,\r\n        height: \"calc(100vh - 180px)\",\r\n        column: [\r\n          {\r\n            label: \"序号\",\r\n            prop: \"index\",\r\n            tip: \"序号\",\r\n            width: 60,\r\n          },\r\n          {\r\n            label: \"系统ID\",\r\n            prop: \"iotId\",\r\n            tip: \"系统名称\",\r\n            display: true,\r\n            hide: true,\r\n          },\r\n          {\r\n            label: \"系统名称\",\r\n            prop: \"systemName\",\r\n            tip: \"系统名称\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"系统编号\",\r\n            prop: \"systemCode\",\r\n            tip: \"系统编号\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"通行令牌\",\r\n            prop: \"token\",\r\n            tip: \"通行令牌\",\r\n            // cell: true,\r\n          },\r\n          {\r\n            label: \"技术支持公司\",\r\n            prop: \"supportCompany\",\r\n            tip: \"技术支持公司\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"联系人\",\r\n            prop: \"contact\",\r\n            tip: \"联系人\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"联系方式\",\r\n            prop: \"linkWay\",\r\n            tip: \"联系方式\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"开发公司\",\r\n            prop: \"developCompany\",\r\n            tip: \"开发公司\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"消息队列名称\",\r\n            prop: \"mqName\",\r\n            tip: \"消息队列名称\",\r\n            cell: true,\r\n          },\r\n          {\r\n            label: \"消息队列关键词\",\r\n            prop: \"mqCode\",\r\n            tip: \"消息队列关键词\",\r\n            cell: true,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    getData() {\r\n      this.data = [];\r\n      this.oldData = [];\r\n      this.chooseData = {};\r\n      this.changeList = [];\r\n      this.loading = true;\r\n      for (var key in this.form) {\r\n        if (this.form[key] === \"\") {\r\n          delete this.form[key];\r\n        }\r\n      }\r\n\r\n      getSystem(\r\n        Object.assign(this.form, {\r\n          page: this.page.currentPage,\r\n          rows: this.page.pageSize,\r\n          start: (this.page.currentPage - 1) * this.page.pageSize + 1,\r\n        })\r\n      ).then((res) => {\r\n        this.data = res.data.records;\r\n        this.page.total = res.data.total;\r\n        this.data.forEach((item, index) => {\r\n          item.index = index + 1;\r\n          let _this = this;\r\n          _this.$nextTick(() => {\r\n            document\r\n              .getElementsByClassName(\"el-table__row\")\r\n              [index].addEventListener(\r\n                \"input\",\r\n                function () {\r\n                  _this.iptChange(item);\r\n                },\r\n                false\r\n              );\r\n          });\r\n        });\r\n        this.loading = false;\r\n      });\r\n    },\r\n    add() {\r\n      if (Object.keys(this.oldData).length > 0) {\r\n        this.oldData.$cellEdit = false;\r\n      }\r\n      this.data.push({\r\n        index: this.data.length + 1,\r\n        $cellEdit: true,\r\n      });\r\n      this.$refs.crud.setCurrentRow(this.data[this.data.length - 1]);\r\n      this.iptChange(this.data[this.data.length - 1]);\r\n      this.oldData = this.data[this.data.length - 1];\r\n      this.$nextTick(() => {\r\n        // 绑定 输入 事件\r\n        let _this = this;\r\n        document\r\n          .getElementsByClassName(\"el-table__row\")\r\n          [_this.data.length - 1].addEventListener(\r\n            \"input\",\r\n            function () {\r\n              _this.iptChange(_this.oldData);\r\n            },\r\n            false\r\n          );\r\n      });\r\n    },\r\n    iptChange(val) {\r\n      if (this.changeList.length === 0) {\r\n        this.changeList.push(val);\r\n      } else {\r\n        for (let i = 0; i < this.changeList.length; i++) {\r\n          if (val.index === this.changeList[i].index) {\r\n            this.changeList[i] = val;\r\n            return;\r\n          }\r\n          if (\r\n            this.changeList.length - 1 === i &&\r\n            this.changeList[i].index != val.index\r\n          ) {\r\n            this.changeList.push(val);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    del() {\r\n      if (Object.keys(this.chooseData).length === 0) {\r\n        this.$tip.error(\"请选择要删除的数据!\");\r\n        return;\r\n      }\r\n      this.$tip.cofirm(\"是否确定删除\", this, {}).then(() => {\r\n        delSystem(this.chooseData.iotId)\r\n          .then((res) => {\r\n            if (res.data.code === 200) {\r\n              this.$tip.success(\"删除成功\");\r\n              this.data.splice(this.chooseData.index - 1, 1);\r\n              // this.getData();\r\n            } else {\r\n              this.$tip.warning(\"删除失败\");\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            this.$tip.error(\"删除失败!\");\r\n          });\r\n      });\r\n    },\r\n    sava() {\r\n      for (let i = 0; i < this.changeList.length; i++) {\r\n        if (!this.changeList[i].systemName || !this.changeList[i].systemCode) {\r\n          this.$tip.error(\"设备/报警时间不能为空!\");\r\n          return;\r\n        }\r\n      }\r\n      this.changeList.forEach((item, index) => {\r\n        if (item.iotId) {\r\n          updataSystem(item).then((res) => {});\r\n        } else {\r\n          addSystem(item).then((res) => {});\r\n        }\r\n      });\r\n      this.getData();\r\n      this.$tip.success(\"保存成功!\");\r\n    },\r\n    cancel() {\r\n      this.getData();\r\n    },\r\n    query() {},\r\n    close() {\r\n      document.getElementsByClassName(\"el-dialog__headerbtn\")[0].click();\r\n    },\r\n    cellClick(val) {\r\n      this.oldData.$cellEdit = false;\r\n      this.$set(val, \"$cellEdit\", true);\r\n      this.oldData = val;\r\n      this.chooseData = val;\r\n    },\r\n  },\r\n  created() {},\r\n  mounted() {},\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n<style lang='stylus'>\r\n#system {\r\n  .el-table {\r\n    // min-height: 300px;\r\n    // max-height: 80vh;\r\n    // overflow: auto;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/pro/info/system/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"system\"}},[_c('view-container',{attrs:{\"title\":\"系统注册信息\"}},[_c('div',{staticClass:\"btnList\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.loading},on:{\"click\":_vm.add}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\",\"disabled\":_vm.loading},on:{\"click\":_vm.sava}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"disabled\":_vm.loading},on:{\"click\":_vm.del}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"disabled\":_vm.loading},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.loading},on:{\"click\":_vm.query}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"disabled\":_vm.loading},on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"formBox\"},[_c('avue-form',{ref:\"form\",attrs:{\"option\":_vm.formOp},model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"crudBox\"},[_c('avue-crud',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"crud\",attrs:{\"data\":_vm.data,\"option\":_vm.crudOp,\"page\":_vm.page},on:{\"current-row-change\":_vm.cellClick,\"on-load\":_vm.getData,\"update:page\":function($event){_vm.page=$event}}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-61734d63\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/pro/info/system/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-61734d63\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61734d63\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/pro/info/system/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}