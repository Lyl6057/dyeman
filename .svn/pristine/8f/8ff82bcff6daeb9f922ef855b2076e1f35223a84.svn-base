webpackJsonp([54],{E3MW:function(t,e){},yCKG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("2uFj"),n={name:"Ek",components:{},data:function(){return{nowTime:"",timer:"",websocket:"",countDown:"",state:{in:{date:3600,po:"PO123455",label:!1},ing:{date:3600,po:"PO123456",label:!0},wait:{date:10,po:"PO123457",label:!1}},worker:[{id:"0001",name:"小江"},{id:"0002",name:"小欧"},{id:"0003",name:"张三"},{id:"0004",name:"李四"},{id:"0005",name:"小五"},{id:"0006",name:"六子"}],data:[],option:{page:!1,menu:!1,addBtn:!1,border:!0,height:400,highlightCurrentRow:!0,column:[{label:"序号",prop:"index",width:60,align:"left"},{label:"胚布编号",prop:"warehouseSn",align:"left"},{label:"入库日期",prop:"warehouseDate",type:"date",format:"yyyy-MM-dd HH:mm:ss",valueFormat:"yyyy-MM-dd HH:mm:ss",align:"center",width:200},{label:"批号",prop:"batchNo",align:"left"},{label:"疋号",prop:"countingNo",align:"left"},{label:"送货单重量",prop:"weight",align:"right"},{label:"实际重量",prop:"actualWeight",align:"right",change:function(t){}},{label:"重量单位",prop:"weightUnit",align:"left"},{label:"检验状态",prop:"inspectionStatus",align:"left"},{label:"确认状态",prop:"confirmStatus",align:"left"}]}}},watch:{},methods:{setWebSoket:function(){i.f.setWebSoket(this);var t=this;t.websocket.onmessage=function(e){var a=JSON.parse(e.data);if("null"!==a)if("confirm"===a.type&&"不通过"===a.confirmStatus){for(var i=0;i<t.data.length;i++)if(t.data[i].warehouseSn===a.warehouseSn)return void t.data.splice(i,1)}else if("confirm"===a.type&&"通过"===a.confirmStatus){for(var n=0;n<t.data.length;n++)if(t.data[n].warehouseSn===a.warehouseSn)return;t.data.push(a)}},t.websocket.onclose=function(){t.websocket.close()}},cellStyle:function(t){var e=t.row;t.column,t.rowIndex;if(6==t.columnIndex)return"已入库"===e.state?{color:"green",fontWeight:"bold"}:"正在入库"===e.state?{color:"red",fontWeight:"bold"}:{fontWeight:"bold"}},CountDown:function(){if(this.state.ing.date>=0){var t=Math.floor(this.state.ing.date/60),e=Math.floor(this.state.ing.date%60);this.countDown=t+":"+e,--this.state.ing.date}else clearInterval(this.timer),alert(this.state.ing.po+"入库成功，请准备,"+this.state.wait.po+"即将入库"),this.state.ing.label=!1,this.state.wait.label=!0,this.timer=setInterval(this.outCountDown,1e3)},outCountDown:function(){if(this.state.wait.date>=0){var t=Math.floor(this.state.wait.date/60),e=Math.floor(this.state.wait.date%60);this.countDown=t+":"+e,this.downLabel="后开始入库",--this.state.wait.date}else clearInterval(this.timer),alert(this.state.wait.po+"开始入库")},time:function(){var t,e;t=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];var a=new Date,i=a.getFullYear(),n=a.getMonth()+1,s=a.getDate(),l=a.getHours(),o=a.getMinutes(),r=a.getSeconds();e=a.getDay(),document.getElementById("time").innerHTML=i+"年"+n+"月"+s+"日\t"+l+":"+o+":"+r+"\t"+t[e]}},created:function(){},mounted:function(){this.setWebSoket(),this.timer=setInterval(this.CountDown,1e3),this.nowTime=setInterval(this.time,1e3)},beforeDestroy:function(){clearInterval(this.nowTime),clearInterval(this.timer),this.websocket.close()},destroyed:function(){this.websocket.close()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"warehousing"}},[a("view-container",{attrs:{title:"纱线入库看板"}},[a("el-row",{staticClass:"main"},[a("el-col",{attrs:{span:15}},[a("div",{staticClass:"day-Order"},[a("avue-crud",{attrs:{data:t.data,option:t.option,"cell-style":t.cellStyle}},[a("template",{slot:"menuLeft"},[a("span",{staticStyle:{float:"left"},attrs:{id:"time"}})])],2)],1)]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"infoBox"},[a("el-steps",{attrs:{active:1,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"已入库 2"}}),t._v(" "),a("el-step",{attrs:{title:"正入库 1"}}),t._v(" "),a("el-step",{attrs:{title:"待入库 3"}})],1),t._v(" "),a("el-row",{staticClass:"now-ing"},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:11,xl:11}},[a("div",{staticStyle:{height:"52px","line-height":"58px"}},[t._v("\n                正在入库【"+t._s(t.state.ing.po)+"】\n              ")]),t._v(" "),a("div",{staticStyle:{height:"52px","line-height":"58px"}},[t._v("\n                等待入库【"+t._s(t.state.wait.po)+"】\n              ")])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:13,xl:13}},[a("div",{staticClass:"timeLabel",style:{opacity:t.state.ing.label?1:0}},[t._v("\n                预计\n                "),a("span",{staticStyle:{"font-size":"34px"}},[t._v(t._s(t.countDown))]),t._v("\n                后完成入库\n              ")]),t._v(" "),a("div",{staticClass:"timeLabel",style:{opacity:t.state.wait.label?1:0}},[t._v("\n                预计\n                "),a("span",{staticStyle:{"font-size":"34px"}},[t._v(t._s(t.countDown))]),t._v("\n                后开始入库\n              ")])])],1),t._v(" "),a("div",{staticClass:"workerTle"},[t._v("值岗工人")]),t._v(" "),a("el-row",{staticClass:"worker"},t._l(t.worker,function(e){return a("el-col",{key:e.id,attrs:{span:4}},[a("p",[a("i",{staticClass:"el-icon-s-custom"})]),t._v("\n              "+t._s(e.name)+"\n            ")])}),1)],1)])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,s,!1,function(t){a("E3MW")},null,null);e.default=l.exports}});
//# sourceMappingURL=54.cff12f71bb0d682f3e10.js.map