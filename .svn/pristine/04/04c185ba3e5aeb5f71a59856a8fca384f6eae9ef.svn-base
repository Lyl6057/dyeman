webpackJsonp([60],{Aebb:function(t,e){},X25B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),n=a.n(i),s=a("woOf"),o=a.n(s),l=a("9Z/t"),r={data:function(){return{loading:!1,page:{pageSize:10,total:0,currentPage:1},chooseData:{},oldData:{},changeList:[],form:{},formOp:{submitBtn:!1,emptyBtn:!1,column:[{label:"规则名称",prop:"ruleName",span:6},{label:"规则编号",prop:"ruleKey",span:6}]},data:[],crudOp:{menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,height:"calc(100vh - 180px)",column:[{label:"规则id",prop:"ruleId",hide:!0},{label:"规则名称",prop:"ruleName",cell:!0},{label:"规则编号",prop:"ruleKey",cell:!0},{label:"规则引擎说明",prop:"ruleRemark",cell:!0},{label:"规则代码内容",prop:"ruleContent",cell:!0}]}}},methods:{getData:function(){var t=this;for(var e in this.data=[],this.oldData=[],this.chooseData=[],this.changeList=[],this.loading=!0,this.form)""===this.form[e]&&delete this.form[e];Object(l.q)(o()(this.form,{page:this.page.currentPage,rows:this.page.pageSize,start:(this.page.currentPage-1)*this.page.pageSize+1})).then(function(e){t.data=e.data.records,t.page.total=e.data.total,t.data.forEach(function(e,a){e.index=a+1;var i=t;i.$nextTick(function(){document.getElementsByClassName("el-table__row")[a].addEventListener("input",function(){i.iptChange(e)},!1)})}),t.loading=!1})},add:function(){var t=this;n()(this.oldData).length>0&&(this.oldData.$cellEdit=!1),this.data.push({index:this.data.length+1,$cellEdit:!0}),this.$refs.crud.setCurrentRow(this.data[this.data.length-1]),this.iptChange(this.data[this.data.length-1]),this.oldData=this.data[this.data.length-1],this.$nextTick(function(){var e=t;document.getElementsByClassName("el-table__row")[e.data.length-1].addEventListener("input",function(){e.iptChange(e.oldData)},!1)})},iptChange:function(t){if(0===this.changeList.length)this.changeList.push(t);else for(var e=0;e<this.changeList.length;e++){if(t.index===this.changeList[e].index)return void(this.changeList[e]=t);this.changeList.length-1===e&&this.changeList[e].index!=t.index&&this.changeList.push(t)}},del:function(){var t=this;0!==n()(this.chooseData).length?this.$tip.cofirm("是否确定删除",this,{}).then(function(){Object(l.k)(t.chooseData.ruleId).then(function(e){200===e.data.code?(t.$tip.success("删除成功"),t.data.splice(t.chooseData.index-1,1)):t.$tip.warning("删除失败")}).catch(function(e){t.$tip.error("删除失败!")})}):this.$tip.error("请选择要删除的数据!")},sava:function(){for(var t=0;t<this.changeList.length;t++)if(!this.changeList[t].ruleName||!this.changeList[t].ruleKey)return void this.$tip.error("规则名称/编号不能为空!");this.changeList.forEach(function(t,e){t.ruleId?Object(l.w)(t).then(function(t){}):Object(l.e)(t).then(function(t){})}),this.getData(),this.$tip.success("保存成功!")},cancel:function(){this.getData()},close:function(){document.getElementsByClassName("el-dialog__headerbtn")[0].click()},cellClick:function(t){this.oldData.$cellEdit=!1,this.$set(t,"$cellEdit",!0),this.oldData=t,this.chooseData=t}},created:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ruleCode"}},[a("view-container",{attrs:{title:"规则引擎代码"}},[a("div",{staticClass:"btnList"},[a("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.add}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"success",disabled:t.loading},on:{click:t.sava}},[t._v("保存")]),a("el-button",{attrs:{type:"danger",disabled:t.loading},on:{click:t.del}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"info",disabled:t.loading},on:{click:t.getData}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.getData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"danger",disabled:t.loading},on:{click:t.close}},[t._v("关闭")])],1),t._v(" "),a("div",{staticClass:"formBox"},[a("avue-form",{ref:"form",attrs:{option:t.formOp},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1),t._v(" "),a("div",{staticClass:"crudBox"},[a("avue-crud",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"crud",attrs:{data:t.data,option:t.crudOp,page:t.page},on:{"current-row-change":t.cellClick,"on-load":t.getData,"update:page":function(e){t.page=e}}})],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("Aebb")},null,null);e.default=d.exports}});
//# sourceMappingURL=60.f692d16052a21f156e67.js.map