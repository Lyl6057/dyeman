webpackJsonp([14],{HwB2:function(e,t){},Y5yY:function(e,t){},ok8v:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("fZjL"),o=l.n(a),n=l("woOf"),r=l.n(n),i=l("FGEf"),s=l("RRpD"),c=l("2uFj"),p={labelWidth:110,submitBtn:!1,emptyBtn:!1,column:[{label:"纱批/批号",prop:"batchNo",span:8,placeholder:" ",readonly:!0},{label:"箱数",prop:"cartonNum",span:8,placeholder:" ",readonly:!0},{label:"每箱锭数",prop:"everySpindle",span:8,placeholder:" ",readonly:!0},{label:"尾箱锭数",prop:"tailSpindle",span:8,placeholder:" ",readonly:!0},{label:"重量",prop:"weight",span:8,placeholder:" ",readonly:!0},{label:"重量单位",prop:"weightUnit",span:8,placeholder:" ",type:"select",dicData:Object(c.a)("Whse_Transfer_unit"),readonly:!0},{label:"纱牌",prop:"yarnsCard",span:8,placeholder:" ",readonly:!0},{label:"产地",prop:"placeOrigin",span:8,placeholder:" ",readonly:!0,type:"select",dicData:Object(c.a)("Whse_Origin")},{label:"入仓数量",prop:"whseNum",span:8,placeholder:" ",readonly:!0},{label:"序号",prop:"seqQty",span:8,placeholder:" ",readonly:!0},{label:"客户编号",prop:"custId",placeholder:" ",readonly:!0,span:8},{label:"送货单重量",prop:"cartonWei",span:8,placeholder:" ",labelWidth:120,readonly:!0}]},h={page:!1,menu:!1,addBtn:!1,border:!0,height:500,highlightCurrentRow:!0,column:[{label:"序号",prop:"index",width:60,align:"left"},{label:"纱线入库明细OID",prop:"whseYarninDtloid",hide:!0},{label:"纱线系统编号",prop:"yarnsId",cell:!0},{label:"纱批/批号",prop:"batchNo",cell:!0},{label:"箱数",prop:"cartonNum",cell:!0},{label:"每箱锭数",prop:"everySpindle",cell:!0},{label:"尾箱锭数",prop:"tailSpindle",cell:!0},{label:"重量",prop:"weight",cell:!0},{label:"重量单位",prop:"weightUnit",cell:!0,type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"纱牌",prop:"yarnsCard",cell:!0},{label:"产地",prop:"placeOrigin",cell:!0,type:"select",dicData:Object(c.a)("Whse_Origin")},{label:"入库数量",prop:"whseNum",cell:!0},{label:"客户编号",prop:"custId",cell:!0},{label:"送货单重量",prop:"cartonWei",cell:!0},{label:"纱线入库_FK",prop:"whseYarninFk",hide:!0}]},d={labelWidth:120,submitBtn:!1,emptyBtn:!1,column:[{label:"序号",prop:"index",span:8,align:"right",placeholder:" ",readonly:!0},{label:"批号",prop:"batchNo",span:8,align:"left",placeholder:" ",readonly:!0},{label:"疋号",prop:"countingNo",span:8,align:"left",placeholder:" ",readonly:!0},{label:"客人布票号",prop:"custTicket",span:8,align:"left",placeholder:" ",readonly:!0},{label:"重量",prop:"weight",align:"right",span:8,placeholder:" ",readonly:!0},{label:"实际重量",prop:"actualWeight",span:8,align:"right",placeholder:" ",readonly:!0},{label:"重量单位",prop:"weightUnit",span:8,align:"left",placeholder:" ",type:"select",dicData:Object(c.a)("Whse_Transfer_unit"),readonly:!0},{label:"是否通过",prop:"isAdopt",align:"left",span:8,placeholder:" ",type:"select",disabled:!0,dicData:[{label:"通过",value:!0},{label:"不通过",value:!1}]}]},b={page:!1,menu:!1,addBtn:!1,border:!0,height:500,highlightCurrentRow:!0,column:[{label:"序号",prop:"index",width:60,align:"left"},{label:"布笼编号",prop:"warehouseSn",align:"left",width:200},{label:"批号",prop:"batchNo",align:"left",width:200},{label:"疋号",prop:"countingNo",align:"left",width:200},{label:"客人布票号",prop:"custTicket",align:"left"},{label:"重量",prop:"weight",align:"right"},{label:"实际重量",prop:"actualWeight",align:"right"},{label:"重量单位",prop:"weightUnit",align:"left",type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"是否通过",prop:"isAdopt",align:"left",type:"select",dicData:[{label:"通过",value:!0},{label:"不通过",value:!1}]}]},m={submitBtn:!1,emptyBtn:!1,labelWidth:110,column:[{label:"缸号",prop:"batchNo",span:8,placeholder:" ",readonly:!0},{label:"疋数",prop:"countingNo",span:8,placeholder:" ",readonly:!0},{label:"重量",prop:"weight",span:8,placeholder:" ",readonly:!0},{label:"重量单位",prop:"weightUnit",span:8,placeholder:" ",readonly:!0,type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"布票号",prop:"fabticket",span:8,placeholder:" ",readonly:!0}]},u={menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,showSummary:!0,sumColumnList:[{label:"共",name:"countingNo",type:"sum"}],height:"500",column:[{label:"序号",prop:"index",width:60,align:"left"},{label:"Whse_FinishedclothIn_dtlOID",prop:"whseFinishedclothinDtloid",hide:!0},{label:"缸号",prop:"batchNo",cell:!0},{label:"疋数",prop:"countingNo",cell:!0},{label:"重量",prop:"weight",cell:!0},{label:"重量单位",prop:"weightUnit",cell:!0,type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"布票号",prop:"fabticket",cell:!0},{label:"货位码",prop:"locationCode",cell:!0},{label:"成品布入库",prop:"whseFinishedclothinFk",cell:!0}]},f={submitBtn:!1,emptyBtn:!1,labelWidth:110,column:[{label:"材料编号",prop:"materialNum",span:8,placeholder:" ",readonly:!0},{label:"数量",prop:"poQty",span:8,placeholder:" ",readonly:!0},{label:"数量单位",prop:"unitQty",span:8,placeholder:" ",readonly:!0},{label:"材料类型",prop:"materialType",span:8,placeholder:" ",readonly:!0},{label:"批号",prop:"batchNo",span:8,placeholder:" ",readonly:!0},{label:"客户编号",prop:"custId",span:8,placeholder:" ",readonly:!0}]},g={menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,showSummary:!0,sumColumnList:[{label:"共",name:"poQty",type:"sum"}],height:"500",column:[{label:"序号",prop:"index",width:60,align:"left"},{label:"五金/行政/生产辅料入库明细OID",prop:"whseAccessoriesDtloid",hide:!0},{label:"材料编号",prop:"materialNum",cell:!0},{label:"数量",prop:"poQty",cell:!0},{label:"数量单位",prop:"unitQty",cell:!0},{label:"材料类型",prop:"materialType",cell:!0},{label:"批号",prop:"batchNo",cell:!0},{label:"序号",prop:"seqQty",cell:!0},{label:"客户编号",prop:"custId",cell:!0},{label:"五金/行政/生产辅料入库_FK",prop:"whseAccessoriesinFk",hide:!0}]},y={submitBtn:!1,emptyBtn:!1,labelWidth:120,column:[{label:"染化料编码",prop:"chemicalId",span:8,placeholder:" ",readonly:!0},{label:"染化料名称",prop:"chemicalName",span:8,placeholder:" ",readonly:!0},{label:"序号",prop:"seqQty",span:8,placeholder:" ",readonly:!0},{label:"批号",prop:"batchNo",span:8,placeholder:" ",readonly:!0},{label:"重量",prop:"weight",span:8,placeholder:" ",readonly:!0},{label:"重量单位",prop:"weightUnit",span:8,placeholder:" ",readonly:!0,type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"客户编号",prop:"custId",span:8,placeholder:" ",readonly:!0}]},w={menu:!1,addBtn:!1,border:!0,highlightCurrentRow:!0,showSummary:!0,sumColumnList:[{label:"共",name:"weight",type:"sum"}],height:"500",column:[{label:"序号",prop:"index",width:60},{label:"Whse_ChemicalIn_dtlaOID",prop:"whseChemicalinDtlaoid",hide:!0},{label:"染化料编码",prop:"chemicalId",cell:!0},{label:"染化料名称",prop:"chemicalName",cell:!0},{label:"批号",prop:"batchNo",cell:!0},{label:"重量",prop:"weight",cell:!0},{label:"重量单位",prop:"weightUnit",cell:!0,type:"select",dicData:Object(c.a)("Whse_Transfer_unit")},{label:"客户编号",prop:"custId",cell:!0},{label:"染化料入库",prop:"whseChemicalinFk",hide:!0}]},v={name:"",props:{type:String,nowTimeLabel:String,option:Object,data:Array,form:Object,formOp:Object,chengzhong:Function,cellStyle:Function,check:Function,submit:Function,over:Function,next:Function,endRc:Boolean},components:{},data:function(){return{forms:{}}},watch:{form:function(){this.forms=this.form}},methods:{},created:function(){},mounted:function(){},beforeDestroy:function(){}},x={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"points"}},[l("el-row",[l("el-col",{attrs:{span:24}},[l("div",{staticClass:"day-Order"},[l("avue-crud",{ref:"crud",attrs:{data:e.data,option:e.option,"cell-style":e.cellStyle},on:{"current-row-change":e.check}},[l("template",{slot:"menuLeft"},[l("span",{staticStyle:{float:"left"},attrs:{id:"time"}},[e._v(e._s(e.nowTimeLabel))])])],2)],1)])],1),e._v(" "),l("el-row",{staticClass:"main"},[l("el-col",{attrs:{span:14}},[l("div",{staticClass:"formTle"},[e._v("\n        "+e._s(e.type)+"信息\n        "),l("el-button",{staticStyle:{padding:"5px 20px","margin-left":"10px","font-size":"18px","font-weight":"bold"},on:{click:e.chengzhong}},[e._v("\n          称重\n        ")])],1),e._v(" "),l("avue-form",{attrs:{option:e.formOp},model:{value:e.forms,callback:function(t){e.forms=t},expression:"forms"}})],1),e._v(" "),l("el-col",{attrs:{span:10}},[l("div",{directives:[{name:"show",rawName:"v-show",value:e.endRc,expression:"endRc"}],staticClass:"btnList"},[l("el-button",{staticStyle:{background:"green"},on:{click:function(t){return e.submit(!0)}}},[e._v("通过 【1】")]),e._v(" "),l("el-button",{staticStyle:{background:"red"},on:{click:function(t){return e.submit(!1)}}},[e._v("不通过 【0】")]),e._v(" "),l("el-button",{staticStyle:{background:"rgb(235, 181, 99)"},on:{click:e.over}},[e._v("开始入库 【5】")])],1),e._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:!e.endRc,expression:"!endRc"}],staticClass:"btnList"},[l("el-button",{staticStyle:{background:"rgb(235, 181, 99)"},on:{click:e.next}},[e._v("继续点数")])],1)])],1)],1)},staticRenderFns:[]};var D={name:"Ek",components:{pointsTem:l("VU/8")(v,x,!1,function(e){l("Y5yY")},null,null).exports},data:function(){return{tabs:"胚布",refresh:!0,nowTime:"",nowTimeLabel:"",websocket:"",czsocket:{},czData:0,endRc:!0,timer:{bpSrcoll:"",tbSrcoll:"",tbSrcCtr:1},pbForm:{},forms:{},formOp:{labelWidth:110,submitBtn:!1,emptyBtn:!1,column:[{label:"布笼编号",placeholder:" ",prop:"warehouseSn",align:"left",readonly:!0,span:8},{label:"存在数量",placeholder:" ",prop:"sum",align:"right",span:8,readonly:!0},{label:"存在重量",placeholder:" ",prop:"weight",align:"right",readonly:!0,span:8}]},sxForm:{},pbFormOp:d,sxFormOp:p,pbData:[],sxData:[],sxOption:h,pbOption:b,rhlData:[],rhlCrudOp:w,rhlForm:{},rhlFormOp:y,cpbCrudOp:u,cpbData:[],cpbForm:{},cpbFormOp:m,scflCrudOp:g,scflData:[],scflFormOp:f,scflForm:{}}},watch:{},methods:{setWebSoket:function(){c.f.setWebSoket(this);var e=this;e.websocket.onmessage=function(t){if("ok"===t.data)return e.endRc=!1,void e.$tip.success("点数完成,开始入库!");var l=JSON.parse(t.data);if(null!==l){if(l.clothNumber)for(var a in e.forms=l.whsClothDetaInformation,""===e.forms.weight&&(e.forms.weight=0),""===e.forms.sum&&(e.forms.sum=0),e.forms.warehouseSn=l.clothNumber,e.forms.boxCarId=l.boxCarId,e.pbData=[],e.$refs.pbTem.forms)e.$refs.pbTem.forms[a]="";"getOperation"!==l.type?l.whseCalicoinDtlboid&&e.setData(l):e.$nextTick(function(){e.tabs=l.value})}else e.$tip.warning("暂无该胚布信息!")},this.setCz()},setCz:function(){c.f.setCz(this);var e=this;e.czsocket.onmessage=function(t){e.czData=t.data}},chengzhong:function(){if(this.czsocket.send("cz"),"胚布"===this.tabs){var e=this.$refs.pbTem.forms;e.whseCalicoinDtlboid&&(e.actualWeight=this.czData,this.$set(this.pbData[e.index-1],"actualWeight",e.actualWeight))}else{var t=this.$refs.sxTem.forms;""!=t.yarnSn&&(t.actualWeight=(t.weight+1*Math.random()-.5).toFixed(2),this.sxData[t.index-1].actualWeight=t.actualWeight,t.actualWeight>t.weight?(this.sxData[t.index-1].inspectionStatus=!0,t.inspectionStatus=!0):(this.sxData[t.index-1].inspectionStatus=!1,t.inspectionStatus=!1))}},setData:function(e){if(e.countingNo){for(var t=0;t<this.pbData.length;t++)if(e.countingNo===this.pbData[t].countingNo&&e.batchNo===this.pbData[t].batchNo)return this.pbData[t].isAdopt=e.isAdopt,this.$refs.pbTem.$refs.crud.setCurrentRow(this.pbData[t]),void this.$tip.success("操作成功!");e.index=this.pbData.length+1,e.boxCarId=this.forms.boxCarId,e.warehouseSn=this.forms.warehouseSn,this.pbData.push(e),this.$refs.pbTem.$refs.crud.setCurrentRow(e),this.$nextTick(function(){document.getElementsByClassName("el-table__body-wrapper")[0].scrollTop+=100})}else{e.index=this.sxData.length+1;for(var l=0;l<this.sxData.length;l++){if(e.yarnSn===this.sxData[l].yarnSn&&"getYarn"===e.type)return void this.$tip.error("单号重复!");if(e.yarnSn===this.sxData[l].yarnSn&&"yarnConfirm"===e.type)return this.sxData[l].confirmStatus=e.confirmStatus,void this.$tip.success("操作成功!")}this.sxData.push(e),this.$refs.sxTem.$refs.crud.setCurrentRow(e),this.$nextTick(function(){document.getElementsByClassName("el-table__body-wrapper")[1].scrollTop+=100})}},check:function(e){"胚布"===this.tabs?this.pbForm=this.pbData[e.index-1]:this.sxForm=this.sxData[e.index-1]},over:function(){var e,t=this.forms.sum,l=this.forms.weight;this.pbData.forEach(function(e){t++,l=Number(l)+Number(void 0===e.weight?0:e.weight)}),e=r()(this.forms,{weight:l,sum:t,boxId:"f016db95-0706-4f4e-bbfd-384bbdeeab0f"}),this.endRc=!1,Object(i.a)(this.pbData).then(function(t){Object(i.b)(e).then(function(e){}),Object(s.d)({boxId:"f016db95-0706-4f4e-bbfd-384bbdeeab0f",exist:1}).then(function(e){})})},next:function(){var e=this;for(var t in this.refresh=!1,this.endRc=!0,this.pbData=[],this.sxData=[],this.pbForm)delete this.pbForm[t];for(var t in this.forms)delete this.forms[t];setTimeout(function(){e.refresh=!0},500)},submit:function(e){var t=this;o()(this.$refs.pbTem.forms).length>0?(this.$refs.pbTem.forms.isAdopt=e,Object(i.c)(this.$refs.pbTem.forms).then(function(e){200===e.status&&t.$tip.success("操作成功!")})):this.$tip.error("请选择操作的数据!")},tbSrc:function(){var e=document.getElementsByClassName("el-table__body-wrapper")[0];this.timer.tbSrcCtr>0?e.scrollTop+=20:e.scrollTop-=20,e.scrollTop>=e.scrollHeight-e.clientHeight&&(this.timer.tbSrcCtr=0),e.scrollTop<=0&&(this.timer.tbSrcCtr=1)},cellStyle:function(e){var t=e.row,l=(e.column,e.rowIndex,e.columnIndex);return 8==l&&"胚布"===this.tabs?t.isAdopt?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}:6==l&&"胚布"===this.tabs?t.weight<t.actualWeight?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}:10==l&&"胚布"===this.tabs?"通过"===t.isAdopt?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}:12==l&&"纱线"===this.tabs?"通过"===t.inspectionStatus?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}:13==l&&"纱线"===this.tabs?"通过"===t.confirmStatus?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}:void 0},seTimer:function(){},time:function(){var e,t;e=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];var l=new Date,a=l.getFullYear(),o=l.getMonth()+1,n=l.getDate(),r=l.getHours(),i=l.getMinutes(),s=l.getSeconds();t=l.getDay(),this.nowTimeLabel=a+"年"+o+"月"+n+"日\t"+r+":"+i+":"+s+"\t"+e[t]}},created:function(){var e=this;document.onkeydown=function(t){"1"===t.key?e.submit(!0):"0"===t.key?e.submit(!1):"5"===t.key&&e.over()}},mounted:function(){var e=this;this.setWebSoket(),this.$nextTick(function(){e.seTimer()}),this.nowTime=setInterval(this.time,1e3)},beforeDestroy:function(){clearInterval(this.nowTime),clearInterval(this.timer),clearInterval(this.timer.tbSrcoll),this.websocket.close(),this.czsocket.onclose()},destroyed:function(){}},T={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:!e.refresh,expression:"!refresh",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"points","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[l("el-card",[l("el-tabs",{attrs:{type:"border-card"},model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[l("el-tab-pane",{attrs:{label:"胚布点数看板",name:"胚布"}},[e.refresh?l("pointsTem",{ref:"pbTem",attrs:{type:"胚布",nowTimeLabel:e.nowTimeLabel,option:e.pbOption,data:e.pbData,form:e.pbForm,formOp:e.pbFormOp,chengzhong:e.chengzhong,cellStyle:e.cellStyle,check:e.check,submit:e.submit,over:e.over,endRc:e.endRc,next:e.next}}):e._e()],1),e._v(" "),l("el-tab-pane",{attrs:{label:"纱线点数看板",name:"纱线"}},[l("pointsTem",{ref:"sxTem",attrs:{type:"胚布",nowTimeLabel:e.nowTimeLabel,option:e.sxOption,data:e.sxData,form:e.sxForm,formOp:e.sxFormOp,chengzhong:e.chengzhong,cellStyle:e.cellStyle,check:e.check,submit:e.submit,over:e.over,endRc:e.endRc,next:e.next}})],1),e._v(" "),l("el-tab-pane",{attrs:{label:"成品布点数看板",name:"成品布"}},[l("pointsTem",{ref:"cpbTem",attrs:{type:"成品布",nowTimeLabel:e.nowTimeLabel,option:e.cpbCrudOp,data:e.cpbData,form:e.cpbForm,formOp:e.cpbFormOp,chengzhong:e.chengzhong,cellStyle:e.cellStyle,check:e.check,submit:e.submit,over:e.over,endRc:e.endRc,next:e.next}})],1),e._v(" "),l("el-tab-pane",{attrs:{label:"染化料点数看板",name:"染化料"}},[l("pointsTem",{ref:"rhlTem",attrs:{type:"染化料",nowTimeLabel:e.nowTimeLabel,option:e.rhlCrudOp,data:e.rhlData,form:e.rhlForm,formOp:e.rhlFormOp,chengzhong:e.chengzhong,cellStyle:e.cellStyle,check:e.check,submit:e.submit,over:e.over,endRc:e.endRc,next:e.next}})],1),e._v(" "),l("el-tab-pane",{attrs:{label:"生产辅料/五金点数看板",name:"生产辅料/五金"}},[l("pointsTem",{ref:"scflTem",attrs:{type:"生产辅料/五金",nowTimeLabel:e.nowTimeLabel,option:e.scflCrudOp,data:e.scflData,form:e.scflForm,formOp:e.scflFormOp,chengzhong:e.chengzhong,cellStyle:e.cellStyle,check:e.check,submit:e.submit,over:e.over,endRc:e.endRc,next:e.next}})],1)],1),e._v(" "),l("el-row",[e.refresh?l("el-col",{attrs:{span:12}},[l("p",{staticStyle:{"font-size":"20px","font-weight":"700","text-indent":"0.5em",color:"#fff"}},[e._v("\n          布笼信息\n        ")]),e._v(" "),l("avue-form",{attrs:{option:e.formOp},model:{value:e.forms,callback:function(t){e.forms=t},expression:"forms"}})],1):e._e()],1)],1)],1)},staticRenderFns:[]};var S=l("VU/8")(D,T,!1,function(e){l("HwB2")},null,null);t.default=S.exports}});
//# sourceMappingURL=14.2facbc181ba242731db6.js.map